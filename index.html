<style>
.players {
    height: 200px;
    width: 200px;
    border-radius: 10px;
    background: gray;
    position: relative;
    margin-top: 55px;
}

.box {
    height: 600px;
    width: 1000px;
    line-height: 194px;
    background: blue;
    position: absolute;
}

.missile {
    height: 100px;
    width: 200px;
    background: black;
    position: absolute;
    top: 0px;
    left: 0px;
}

.right-fire {
    animation: right-fire 1s forwards;
}

@keyframes right-fire {
    to {
        left: 100%;
    }
}

.left-fire {
    animation: left-fire 1s forwards;
}

@keyframes left-fire {
    to {
        left: 0%;
    }
}

.up-fire {
    animation: up-fire 1s forwards;
}

@keyframes up-fire {
    to {
        top: 0%;
    }
}

.down-fire {
    animation: down-fire 1s forwards;
}

@keyframes down-fire {
    to {
        top: 100%;
    }
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<button>Start</button>
<div id="box" class="box">
    <div class='players' id="player1">d</div>
    <div class='players' id="player2">z button</div>
</div>
<script>
const keys = {

    playeronekeys: {
        fire: {
            isPressed: false,
            keyCode: 190, // it is '.' dot
        },
        right: {
            isPressed: false,
            keyCode: 39,
        },
        up: {
            isPressed: false,
            keyCode: 38,
        },
        down: {
            isPressed: false,
            keyCode: 40,
        },
        left: {
            isPressed: false,
            keyCode: 37,
        }
    },
    playertwokeys: {
        fire: {
            isPressed: false,
            keyCode: 17, // this is control
        },
        d: {
            isPressed: false,
            keyCode: 68,
        },
        w: {
            isPressed: false,
            keyCode: 87,
        },
        s: {
            isPressed: false,
            keyCode: 83,
        },
        a: {
            isPressed: false,
            keyCode: 65,
        }
    }

}

//     class tankmaker {
//   constructor(name) {
//     this.name = name
//     this.height = 200;
//     this.width = 200;
//   }

// }

// let p1tank = new tankmaker('p1tank');
// let p2tank = new tankmaker('p2tank');


let player1 = document.getElementById('player1')
let player2 = document.getElementById('player2')

let xforz = 0;
let xposp1 = 0;
let yposp1 = 0;
let xposp2 = 0;
let yposp2 = 0;

var won = false;

var cl = console.log;

let speed = 1;

// if (!won) {
document.onkeydown = function(event) {

}
setInterval(function() {
    document.onkeydown = function(event) {
        for (var key in keys.playeronekeys) {
            if (keys.playeronekeys[key].keyCode == event.keyCode) {
                keys.playeronekeys[key].isPressed = true;
            }

        }
        if (event.keyCode == 190) {


            p1fire();

        }

        for (var key in keys.playertwokeys) {
            if (keys.playertwokeys[key].keyCode == event.keyCode) {
                keys.playertwokeys[key].isPressed = true;
            }
        }
    }

    // if (!won) {
    for (var key in keys.playeronekeys) {

        if (keys.playeronekeys.right.isPressed) {
            // if ((xposp2 != xposp1) && (yposp2 != xposp1)) {
            xposp1 += speed;
            player1.style.left = xposp1 + "px";
            // console.log(xposp1);

            // console.log('okay going on right');

            // }
        }
        if (keys.playeronekeys.left.isPressed) {
            xposp1 -= speed;
            player1.style.left = xposp1 + "px";
            // console.log(xposp1);
            // console.log('okay going on l`eft');
        }
        if (keys.playeronekeys.up.isPressed) {
            yposp1 -= speed;
            player1.style.top = yposp1 + "px";
            // console.log(yposp1);
            // console.log('okay going on up');
        }
        if (keys.playeronekeys.down.isPressed) {
            yposp1 += speed;
            player1.style.top = yposp1 + "px";
            // console.log(yposp1);
            // console.log('okay going on down');
        }
        // if (keys.playeronekeys.fire.isPressed) {
        //     p1fire();
        // }

    }

    for (var key in keys.playertwokeys) {

        if (keys.playertwokeys.d.isPressed) {
            xposp2 += speed;
            player2.style.left = xposp2 + "px";
            // console.log(xposp2);
        }
        if (keys.playertwokeys.a.isPressed) {
            xposp2 -= speed;
            player2.style.left = xposp2 + "px";
            // console.log(xposp2);
        }
        if (keys.playertwokeys.w.isPressed) {
            yposp2 -= speed;
            player2.style.top = yposp2 + "px";
            // console.log(yposp2);
        }
        if (keys.playertwokeys.s.isPressed) {
            yposp2 += speed;
            player2.style.top = yposp2 + "px";
            // console.log(yposp2);
        }
    }
    // }

    document.onkeyup = function(event) {
        for (var key in keys.playeronekeys) {
            if (keys.playeronekeys[key].keyCode == event.keyCode) {
                keys.playeronekeys[key].isPressed = false;
            }
        }
        for (var key in keys.playertwokeys) {
            if (keys.playertwokeys[key].keyCode == event.keyCode) {
                keys.playertwokeys[key].isPressed = false;
            }
        }
    };
}, 20);

let p1fireallow = true;

function p1fire() {

    if (p1fireallow == true) {
        let player1 = $("#player1");
        var player1offset = player1.offset();
        // console.log(offset.left);

        // console.log('');

        // console.log('the fire is on');

        let fire = document.createElement('div');
        fire.className = 'missile right-fire p1missile';
        fire.id = 'p1missile';
        $('body').append(fire);
        $(".p1missile").offset({
            top: player1offset.top,
            left: player1offset.left
        });
        fire.className = 'missile right-fire';
        // console.log('this is firign right now');


        // for (var i = 0; i < 100; i++) {
        // let a = i * 0.1;
        // fire.style.left = a + "px";
        // }
        p1fireallow = false;
        // console.log(p1fireallow);
        console.log($('#player2').outerWidth(true));
    }

    setTimeout(function() {
        p1fireallow = true;
    }, 1000);

}
</script>
